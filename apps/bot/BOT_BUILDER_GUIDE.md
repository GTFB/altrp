# üõ†Ô∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–±–æ—Ä–∫–µ –±–æ—Ç–æ–≤

**–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é Telegram –±–æ—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞**

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥](#-—Å–æ–∑–¥–∞–Ω–∏–µ-–∫–æ–º–∞–Ω–¥)
4. [–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–ª–æ—É](#-—Å–æ–∑–¥–∞–Ω–∏–µ-—Ñ–ª–æ—É)
5. [–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫](#-—Å–æ–∑–¥–∞–Ω–∏–µ-–∫–Ω–æ–ø–æ–∫)
6. [–°–æ–∑–¥–∞–Ω–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤](#-—Å–æ–∑–¥–∞–Ω–∏–µ-—Ö—ç–Ω–¥–ª–µ—Ä–æ–≤)
7. [–°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π](#-—Å–∏—Å—Ç–µ–º–∞-—Å–æ–æ–±—â–µ–Ω–∏–π)
8. [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏](#-–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-—Ç–µ—Ö–Ω–∏–∫–∏)
9. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
git clone <repository>
cd apps/bot
npm install

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp wrangler.toml.example wrangler.toml
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ wrangler.toml —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –±–æ—Ç–∞
```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É
# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–ª–æ—É
# 3. –°–æ–∑–¥–∞–π—Ç–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã
# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é
npm run generate-flows-index

# 5. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –±–æ—Ç–∞
npm run deploy
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/apps/bot/src/config/
‚îú‚îÄ‚îÄ commands.ts          # –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (/start, /help, etc.)
‚îú‚îÄ‚îÄ callbacks.ts         # –ö–Ω–æ–ø–∫–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ handlers.ts          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ —Ö—ç–Ω–¥–ª–µ—Ä—ã
‚îî‚îÄ‚îÄ flows/              # –§–ª–æ—É (–¥–∏–∞–ª–æ–≥–∏) –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ index.ts        # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
    ‚îú‚îÄ‚îÄ start_registration.ts
    ‚îú‚îÄ‚îÄ onboarding.ts
    ‚îî‚îÄ‚îÄ ...
```

## üéØ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ `commands.ts`

```typescript
// apps/bot/src/config/commands.ts
export const commands: BotCommand[] = [
  {
    name: "/start",
    handlerName: "handleStartCommandFlow",
    description: "Start working with bot"
  },
  {
    name: "/my_command",        // ‚Üê –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
    handlerName: "handleMyCommand",
    description: "My custom command"
  }
];
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã –≤ `handlers.ts`

```typescript
// apps/bot/src/config/handlers.ts
export const createCustomHandlers = (worker: BotInterface) => ({
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã

  // –ù–æ–≤—ã–π —Ö—ç–Ω–¥–ª–µ—Ä –∫–æ–º–∞–Ω–¥—ã
  handleMyCommand: async (message: any, bot: any) => {
    const userId = message.from.id;
    const chatId = message.chat.id;

    console.log(`üöÄ Handling /my_command for user ${userId}`);
    
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
    await bot.flowEngine.startFlow(userId, 'my_flow');
  }
});
```

## üîÑ –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–ª–æ—É

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ñ–ª–æ—É

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `apps/bot/src/config/flows/my_flow.ts`:

```typescript
import type { BotFlow } from '../../core/flow-types';

export const myFlow: BotFlow = {
  name: 'my_flow',
  description: 'My custom flow',
  steps: [
    {
      type: 'message',
      id: 'welcome',
      messageKey: 'welcome_message',
      keyboardKey: 'main_menu'
    },
    {
      type: 'wait_input',
      id: 'ask_name',
      prompt: 'enter_name',
      saveToVariable: 'user.name',
      nextStep: 'ask_email'
    },
    {
      type: 'wait_input',
      id: 'ask_email',
      prompt: 'enter_email',
      saveToVariable: 'user.email',
      nextStep: 'process_data'
    },
    {
      type: 'handler',
      id: 'process_data',
      handlerName: 'processUserData',
      nextStep: 'show_result'
    },
    {
      type: 'message',
      id: 'show_result',
      messageKey: 'registration_complete',
      nextStep: ''
    }
  ]
};
```

### 2. –¢–∏–ø—ã —à–∞–≥–æ–≤ —Ñ–ª–æ—É

#### `message` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```typescript
{
  type: 'message',
  id: 'step_id',
  messageKey: 'message_key',        // –ö–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ i18n
  keyboardKey: 'keyboard_key',      // –ö–ª—é—á –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  nextStep: 'next_step_id'          // –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

#### `wait_input` - –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞
```typescript
{
  type: 'wait_input',
  id: 'step_id',
  prompt: 'enter_prompt',           // –ö–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è-–ø–æ–¥—Å–∫–∞–∑–∫–∏
  saveToVariable: 'user.name',      // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  validation: {                     // –í–∞–ª–∏–¥–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    type: 'email',
    errorMessage: 'invalid_email'
  },
  nextStep: 'next_step_id'
}
```

#### `handler` - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä–∞
```typescript
{
  type: 'handler',
  id: 'step_id',
  handlerName: 'handlerName',       // –ò–º—è —Ö—ç–Ω–¥–ª–µ—Ä–∞ –∏–∑ handlers.ts
  nextStep: 'next_step_id'
}
```

#### `flow` - –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥—Ä—É–≥–æ–º—É —Ñ–ª–æ—É
```typescript
{
  type: 'flow',
  id: 'step_id',
  flowName: 'other_flow_name'
}
```

#### `dynamic` - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
```typescript
{
  type: 'dynamic',
  id: 'step_id',
  handler: 'generateDynamicContent', // –•—ç–Ω–¥–ª–µ—Ä –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  keyboardKey: 'dynamic_keyboard',  // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  nextStep: 'next_step_id'
}
```

### 3. –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–ª–æ—É

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–ª–æ—É –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é:

```bash
npm run generate-flows-index
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ù–∞–π–¥–µ—Ç –≤—Å–µ —Ñ–ª–æ—É –≤ –ø–∞–ø–∫–µ `flows/`
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `index.ts` —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏
- –ü–æ–¥–∫–ª—é—á–∏—Ç —Ñ–ª–æ—É –∫ —Å–∏—Å—Ç–µ–º–µ

## üîò –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫

### 1. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ `callbacks.ts`

```typescript
// apps/bot/src/config/callbacks.ts
export const keyboards = {
  main_menu: {
    inline_keyboard: [
      [
        { text: "üìÑ –°–æ–∑–¥–∞—Ç—å —Å—á–µ—Ç", callback_data: "create_invoice" },
        { text: "üìä –û—Ç—á–µ—Ç—ã", callback_data: "reports" }
      ],
      [
        { text: "üë§ –ü—Ä–æ—Ñ–∏–ª—å", callback_data: "profile" },
        { text: "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", callback_data: "settings" }
      ]
    ]
  },

  language_selection: {
    inline_keyboard: [
      [
        { text: "üá∑üá∏ Srpski", callback_data: "lang_select_sr" },
        { text: "üá∑üá∫ –†—É—Å—Å–∫–∏–π", callback_data: "lang_select_ru" }
      ]
    ]
  }
};
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫

```typescript
// apps/bot/src/config/callbacks.ts
export const callbackActions = {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
  'lang_select_sr': {
    action: 'set_variable',
    variable: 'user.language',
    value: 'sr',
    nextFlow: 'onboarding'
  },
  'lang_select_ru': {
    action: 'set_variable',
    variable: 'user.language',
    value: 'ru',
    nextFlow: 'onboarding'
  },

  // –ó–∞–ø—É—Å–∫ —Ñ–ª–æ—É
  'create_invoice': {
    action: 'start_flow',
    flowName: 'create_invoice'
  },

  // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É
  'go_to_profile': {
    action: 'go_to_step',
    stepId: 'show_profile'
  }
};
```

## ‚öôÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤

### 1. –•—ç–Ω–¥–ª–µ—Ä—ã –∫–æ–º–∞–Ω–¥

```typescript
// apps/bot/src/config/handlers.ts
export const createCustomHandlers = (worker: BotInterface) => ({
  // –•—ç–Ω–¥–ª–µ—Ä –∫–æ–º–∞–Ω–¥—ã
  handleMyCommand: async (message: any, bot: any) => {
    const userId = message.from.id;
    // –õ–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã
  },

  // –•—ç–Ω–¥–ª–µ—Ä –¥–ª—è —à–∞–≥–∞ —Ñ–ª–æ—É
  processUserData: async (telegramId: number, contextManager: UserContextManager) => {
    const userName = await contextManager.getVariable(telegramId, 'user.name');
    const userEmail = await contextManager.getVariable(telegramId, 'user.email');
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    console.log(`Processing user: ${userName}, email: ${userEmail}`);
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
    await worker.d1Storage.addUser({
      name: userName,
      email: userEmail,
      // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    });
  },

  // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ö—ç–Ω–¥–ª–µ—Ä
  generateDynamicContent: async (telegramId: number, contextManager: UserContextManager) => {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
    const data = await worker.d1Storage.getSomeData();
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
    return `–î–∞–Ω–Ω—ã–µ: ${JSON.stringify(data)}`;
  }
});
```

### 2. –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö

```typescript
// –í —Ö—ç–Ω–¥–ª–µ—Ä–µ –¥–æ—Å—Ç—É–ø–Ω—ã:
const handlerWorker = {
  d1Storage: worker['d1Storage'],        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  flowEngine: worker['flowEngine'],      // –î–≤–∏–∂–æ–∫ —Ñ–ª–æ—É
  env: worker['env'],                    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  messageService: worker['messageService'], // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
  topicService: worker['topicService']   // –¢–æ–ø–∏–∫–∏ Telegram
};

// –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
await handlerWorker.d1Storage.getUser(telegramId);
await handlerWorker.messageService.sendMessage(telegramId, 'Hello!');
await contextManager.setVariable(telegramId, 'key', 'value');
```

## üí¨ –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### 1. –ö–ª—é—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `src/core/messages.ts`):

```typescript
export const messages = {
  welcome_message: {
    ru: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üëã',
    sr: 'Dobrodo≈°li! üëã'
  },
  enter_name: {
    ru: '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:',
    sr: 'Unesite va≈°e ime:'
  },
  enter_email: {
    ru: '–í–≤–µ–¥–∏—Ç–µ email:',
    sr: 'Unesite email:'
  }
};
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ–ª–æ—É

```typescript
{
  type: 'message',
  id: 'welcome',
  messageKey: 'welcome_message',  // –ö–ª—é—á –∏–∑ messages
  keyboardKey: 'main_menu'
}
```

## üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏

### 1. –£—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

```typescript
{
  type: 'condition',
  id: 'check_user_type',
  condition: 'user.type === "premium"',
  trueFlow: 'premium_flow',
  falseFlow: 'basic_flow'
}
```

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏

```typescript
// –í —Ö—ç–Ω–¥–ª–µ—Ä–µ
generateCourseButtons: async (telegramId, contextManager) => {
  const courses = await worker.d1Storage.getCourses();
  
  const buttons = courses.map(course => ({
    text: course.name,
    callback_data: JSON.stringify({
      type: 'course_select',
      courseId: course.id,
      stepId: 'select_course'
    })
  }));
  
  return {
    message: '–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å:',
    keyboard: { inline_keyboard: [buttons] }
  };
}
```

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞

```typescript
{
  type: 'wait_input',
  id: 'ask_email',
  prompt: 'enter_email',
  saveToVariable: 'user.email',
  validation: {
    type: 'email',
    errorMessage: 'invalid_email_format'
  },
  nextStep: 'next_step'
}
```

### 4. –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

```typescript
// –í —Ö—ç–Ω–¥–ª–µ—Ä–µ
handleFileUpload: async (telegramId, contextManager) => {
  const file = await contextManager.getVariable(telegramId, '_system.currentFile');
  
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ R2
  await worker.env.BOT_STORAGE.put(`users/${telegramId}/file.pdf`, file);
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–π —Å—Å—ã–ª–∫–∏
  const publicUrl = `https://pub-${bucketId}.r2.dev/users/${telegramId}/file.pdf`;
}
```

## üîß –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ wrangler.toml

```toml
name = "my-bot"
main = "src/worker.ts"
compatibility_date = "2024-01-01"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "my-bot-db"
database_id = "your-database-id"

# R2 Storage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
[[r2_buckets]]
binding = "BOT_STORAGE"
bucket_name = "my-bot-storage"
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

```bash
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞
wrangler secret put BOT_TOKEN

# ID –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ —á–∞—Ç–∞
wrangler secret put ADMIN_CHAT_ID
```

### 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–ª–æ—É
npm run generate-flows-index

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
npm run deploy
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

```bash
# –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-worker.your-subdomain.workers.dev"}'
```

## üìö –ü—Ä–∏–º–µ—Ä—ã –≥–æ—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤

### 1. –ë–æ—Ç-–æ–ø—Ä–æ—Å–Ω–∏–∫
- –§–ª–æ—É: `questionnaire.ts`
- –ö–æ–º–∞–Ω–¥—ã: `/start`, `/restart`
- –ö–Ω–æ–ø–∫–∏: –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤

### 2. –ë–æ—Ç-–∫–∞—Ç–∞–ª–æ–≥
- –§–ª–æ—É: `catalog.ts`, `product_details.ts`
- –ö–æ–º–∞–Ω–¥—ã: `/catalog`, `/search`
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏: —Ç–æ–≤–∞—Ä—ã –∏–∑ –ë–î

### 3. –ë–æ—Ç-–∑–∞–∫–∞–∑
- –§–ª–æ—É: `order.ts`, `payment.ts`
- –ö–æ–º–∞–Ω–¥—ã: `/order`, `/status`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–ª–æ—É
- ‚úÖ –û–¥–∏–Ω —Ñ–ª–æ—É = –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ ID —à–∞–≥–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞

### 2. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: `/action_name`
- ‚úÖ –§–ª–æ—É: `action_name`
- ‚úÖ –•—ç–Ω–¥–ª–µ—Ä—ã: `handleActionName`
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `category.subcategory`

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```typescript
try {
  await processData();
} catch (error) {
  console.error('Error:', error);
  await contextManager.setVariable(telegramId, 'error', error.message);
  await flowEngine.goToStep(telegramId, 'error_handler');
}
```

---

**üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ—â–Ω—ã—Ö Telegram –±–æ—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞!**

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫:
- [README.md](./README.md) - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- [DEPLOYMENT.md](./DEPLOYMENT.md) - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [–ü—Ä–∏–º–µ—Ä—ã —Ñ–ª–æ—É](./src/config/flows/) - –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã
