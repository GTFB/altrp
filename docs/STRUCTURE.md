# Project Structure

This document outlines the ideal project structure, designed for scalability, clear separation of concerns, and alignment with Next.js App Router best practices. It is tailored to the project's specific technology stack.

## Root Directory Structure

```
.
├── .github/              # GitHub settings (Actions, PR templates, etc.)
├── .husky/               # Husky configuration for Git hooks
├── .vscode/              # VS Code project settings (settings.json)
├── _templates/           # Templates for the Hygen code generator
├── content/              # The "database" for the Git-as-CMS strategy
├── public/               # Static assets (favicon, images, fonts)
├── src/                  # Main application source code
├── .eslintrc.json        # ESLint configuration
├── .gitignore
├── .lintstagedrc.js      # lint-staged configuration
├── .prettierrc.js        # Prettier configuration
├── bun.lockb             # Bun lockfile
├── components.json       # shadcn/ui configuration
├── next-env.d.ts
├── next.config.mjs       # Next.js configuration
├── next-sitemap.config.js # next-sitemap configuration
├── package.json
├── postcss.config.js     # PostCSS configuration (for Tailwind)
├── tailwind.config.ts    # Tailwind CSS configuration
└── tsconfig.json         # TypeScript configuration
```

## Detailed `src/` Directory Structure

This is the heart of the application. The `src` directory is designed to logically group files by their purpose.

```
src
├── app/                  # App Router: pages, layouts, API routes
│   ├── (cms)/            # Route group for the admin panel (CMS)
│   │   ├── admin/
│   │   │   ├── dashboard/
│   │   │   │   └── page.tsx  # Dashboard page (using Tremor)
│   │   │   └── editor/
│   │   │       └── [slug]/
│   │   │           └── page.tsx  # TipTap editor page
│   │   └── layout.tsx    # Separate layout for the CMS
│   │
│   ├── (main)/           # Route group for the public-facing site
│   │   ├── [locale]/     # Dynamic segment for i18n (next-intl)
│   │   │   ├── blog/
│   │   │   │   ├── [slug]/
│   │   │   │   │   └── page.tsx
│   │   │   │   └── page.tsx
│   │   │   ├── layout.tsx     # Main layout with Header/Footer
│   │   │   └── page.tsx       # Home page
│   │   └── not-found.tsx  # Custom 404 page
│   │
│   ├── api/                # API routes
│   │   ├── auth/
│   │   │   └── [...nextauth]/
│   │   │       └── route.ts # Handler for NextAuth.js
│   │   ├── revalidate/
│   │   │   └── route.ts     # Route for on-demand cache revalidation
│   │   └── rss/
│   │       └── route.ts      # RSS feed endpoint
│   │
│   ├── globals.css         # Global styles and Tailwind directives
│   └── layout.tsx          # Root layout (<html>, <body> tags)
│
├── components/           # Reusable React components
│   ├── features/         # Components responsible for specific business logic
│   │   ├── blog/           # e.g., PostCard, PostList
│   │   │   ├── PostCard.tsx
│   │   │   └── PostList.tsx
│   │   ├── search/         # Search component with Fuse.js integration
│   │   │   └── GlobalSearch.tsx
│   │   └── cms/            # CMS components
│   │       ├── TipTapEditor.tsx
│   │       └── PostForm.tsx
│   │
│   ├── layout/           # Components for page structure
│   │   ├── Header.tsx
│   │   ├── Footer.tsx
│   │   └── Sidebar.tsx
│   │
│   ├── providers/        # Context providers and wrappers
│   │   ├── ThemeProvider.tsx # For next-themes
│   │   ├── SessionProvider.tsx # For NextAuth.js
│   │   ├── IntlProvider.tsx # For next-intl
│   │   └── Providers.tsx # Combined providers
│   │
│   ├── shared/           # General, atomic components (not from shadcn)
│   │   ├── Icon.tsx        # Component for Lucide icons
│   │   └── Logo.tsx
│   │
│   └── ui/               # Components from the Shadcn/ui library (generated by CLI)
│       ├── button.tsx
│       ├── card.tsx
│       └── ...
│
├── lib/                  # Helper code not related to React
│   ├── api/              # Clients for external APIs
│   │   └── github.ts     # Initialization and configuration of Octokit.js
│   │
│   ├── mdx.ts            # Logic for parsing and rendering MDX (next-mdx-remote)
│   ├── search.ts         # Logic for Fuse.js (content indexing)
│   ├── sharp.ts          # Functions for image processing with Sharp
│   ├── rss.ts            # RSS feed generation
│   ├── utils.ts          # General utilities (e.g., `cn` for Tailwind, date formatting)
│   └── validators/       # Zod validation schemas
│       ├── content.schema.ts # Schema for MDX file frontmatter
│       ├── form.schema.ts    # Schemas for React Hook Form
│       ├── content.schema.test.ts # Tests for content schema
│       └── form.schema.test.ts    # Tests for form schema
│
├── repositories/         # Implementation of the Repository Pattern
│   ├── base.repository.ts  # Base interface or class
│   └── post.repository.ts  # Repository for working with content (posts)
│
├── stores/               # Global state managers (Zustand)
│   ├── ui.store.ts       # Store for UI state (e.g., is sidebar open)
│   └── user.store.ts     # Store for user data
│
├── hooks/                # Custom React hooks
│   └── use-debounce.ts   # Example of a custom hook
│
├── config/               # Application-wide configuration files
│   ├── auth.ts           # NextAuth.js configuration
│   ├── i18n.ts           # next-intl configuration
│   ├── marketing.ts      # Configuration for SEO, sitemap, etc.
│   └── site.ts           # General site configuration (name, URL)
│
├── messages/             # Localization files for next-intl
│   ├── en.json
│   └── ru.json
│
└── types/                # Global TypeScript definitions
    ├── content.d.ts      # Types for posts, authors, etc.
    └── next-auth.d.ts    # Extending types for the NextAuth session
```

## Detailed `content/` Directory Structure

This is your file-based "database" and the core of the **Git-as-CMS** strategy.

```
content
├── authors/              # Information about authors
│   └── john-doe.mdx
├── blog/                 # Blog posts
│   └── my-first-post/      # Folder for a post to co-locate images
│       ├── index.mdx       # The post itself with frontmatter
│       └── hero-image.png  # Image associated with the post
│   └── another-post.mdx  # Alternatively, posts can be stored as single files
│
└── pages/                # Standalone pages (e.g., About, Contact)
    └── about.mdx
```

## Key Architectural Decisions

1.  **`src/` Directory**: Using a `src` directory separates application code from root-level configuration files, resulting in a cleaner project structure.

2.  **Next.js Route Groups `(main)` & `(cms)`**: Parentheses `()` in folder names within `app` create route groups. This allows for different layouts for the public-facing site and the internal CMS without affecting the URL structure.

3.  **`[locale]` for i18n**: This is the standard pattern for `next-intl`, making the locale a dynamic segment of the URL (e.g., `/en/blog`, `/ru/blog`).

4.  **`components/` Breakdown**:
    *   **`ui/`**: Strictly for components generated by the `shadcn/ui` CLI. These should not be manually edited; instead, they should be updated via the CLI.
    *   **`shared/`**: Your own custom, atomic components that are application-agnostic and can be used anywhere (e.g., `Logo`, `Icon`).
    *   **`features/`**: Larger, "smarter" components that handle specific business logic or features (e.g., `PostCard` knows how to display post data; `GlobalSearch` contains search logic).

5.  **`lib/` vs `hooks/` vs `stores/`**:
    *   **`lib/`**: For pure TypeScript/JavaScript modules that are not React-specific. This is the perfect place for API clients, Zod validators, and utility functions.
    *   **`hooks/`**: For custom React Hooks that encapsulate stateful logic and can be reused across components.
    *   **`stores/`**: For global state management using Zustand. Each store is separated into its own file (e.g., `ui.store.ts`) for better organization.

6.  **`repositories/`**: This is the core of our **Data Strategy**. A repository (e.g., `post.repository.ts`) encapsulates all logic for fetching and processing data from the `content/` directory. It reads files, parses frontmatter with Zod, processes MDX, and returns structured data to the application. This isolates business logic from the data source.

7.  **`config/`**: Moving configurations (NextAuth, i18n) into a dedicated `config/` directory keeps the application code cleaner and makes project settings easier to find.

8.  **`content/`**: Structuring content by type (e.g., `blog`, `authors`) allows for easy extension of data models. Using a dedicated folder for each post (`my-first-post/index.mdx`) is a convenient pattern for co-locating images with their corresponding content.

9.  **Testing**: Test files (`*.test.ts`, `*.test.tsx`) should be co-located with the source files they are testing (e.g., `src/lib/utils.test.ts` or `src/components/features/blog/PostCard.test.tsx`).

10. **CMS Integration**: The CMS section includes TipTap editor for content creation and Tremor dashboard for analytics, providing a complete content management experience.